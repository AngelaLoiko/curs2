# [VKinder](https://vk.com/public213985884 "Бот знакомств") чат-бот ВКонтакте
## "VKinder" чат-бот ВКонтакте (версия 1.1 от 11.07.2022)

Бот позволяет искать людей в социальной сети ВКонтакте, на основании информации о вас, как пользователя ВКонтакте:
- возраст (если указан +n лет -k года от Вашего возраста, где n и k задаются в параметрах настроек бота `settings.py` под названиями "older" и "younger" соответственно);
- пол (если вы женского пола то ищутся кандидаты мужского пола, если вы мужского пола, то женского, если ваш пол не указан - то любого);
- город (если указан);
- фото (не менее 3-х фотографий).

Найденные контакты при повторном поиске не повторяются

Бот возвращает подходящих кандидатов в виде:
- имя;
- фамилия;
- ссылка на аккаунт;
- топ-3 популярных фотографии контакта (популярность определяется количеством лайков).

## Настройки бота

### Настройка
1. Перейдите в папку с ботом
2. Установите зависимости из файла `requirements.txt`. Например, выполнив команду `pip install -r requirements.txt`. Это автоматически установит все нужные модули.
3. Создайте папку tokens, в нее поместите 3 текстовых файла:
- database.txt - строка для коннекта к базе данных в виде `postgresql+psycopg2://postgres:dbadmin@localhost/postgres`, 
                   где `postgres` - имя базы данных, `dbadmin` - пароль;
- token_vk.txt - access_token аккаунта ВК;
- token_group.txt - access_token сообщества;
4. Создайте базу данных `vkinder`, используя скрипт `db/create_db.sql`. Скрипт заполнит и основные справочники для работы базы данных;
5. Запустите `python main.py`.

## Руководство пользователя

### Запуск бота
1. Напишите любое сообщение боту, например `Привет`
2. Бот поздоровается с вами и предложит 4 кнопки для работы с ним `Начать поиск`, 
   `Cледующий кандидат`, `Добавить в избранное`, `Посмотреть избранных кандидатов`
3. Нажимайте на любую кнопку

### Кнопка `Начать поиск`
Если вы нажмете на эту кнопку, то бот выдаст одну запись, соответствующую вашим параметрам.

### Кнопка `Следующий кандидат`
Если вы нажмете на эту кнопку, то бот выдаст следующую запись, соответствующую вашим параметрам

### Кнопка `Добавить в избранное`
Если вы нажмете на эту кнопку, то кандидат добавится в список избранный. который Вы сможете посмотреть в любой момент
 
### Кнопка `Посмотреть избранных кандидатов`
Если вы нажмете на эту кнопку, то вы увидитеn пронумерованный список, в который вы добавляли избранных кандидатов в виде:
- имя;
- фамилия;
- ссылка на аккаунт;


### Примечания
1. В любой момент общения с ботом вы можете нажать любую кнопку или написать любое сообщение - бот ответит вам; 
2. Кандидаты никогда не повторяются, даже если вы стартуете новый сеанс общения с ботом;
3. Информация об избранных кандидатах сохраняется при выходе из бота;
4. Если кандидат вам подходит, но запретил просматривать свои фотографии, вы получите соответствующее сообщение от бота об этом;
5. Если у кандидата отсутствуют фотографии в профиле, вы получите соответствующее сообщение от бота об этом;
6. Если фотографии пользователя не показываются ботом по описанным в п.5 и п.6 причинам, вы сможете перейти по ссылке на профиль и воспользоваться стандартными функциями Вконтакте.